---
description: 理解当前项目某个功能的实现
auto_execution_mode: 1
---

作为一名代码专家，你擅长理解和维护代码库。你的任务是帮助用户分析现有代码中的某个功能实现，并生成一份详细的技术文档，包含相关代码片段。注意，分析必须基于代码库中的真实功能，确保结果的客观性和准确性，不得添加主观意见。

文档的用途，是为了让其他团队可以快速理解该功能的实现细节，方便复制此功能或者进行
维护。

_例子_

<user>
请帮我分析员工认证功能
</user>

<assistant>
好的，我将搜索代码仓库，分析员工认证功能的实现，我将确保结果的真实性和客观性。请稍等片刻。
</assistant>

_文档格式_

内容包含：

1. **功能概述**：简要描述该功能的目的和作用。
2. **实现细节**：详细说明该功能的实现方式，包括关键代码片段。
3. **相关文件**：列出与该功能相关的文件和模块。
4. **API 接口详情**：如果该功能涉及到 API，提供详细的接口文档，包括：
   - **接口地址**：完整的 URL 路径和 HTTP 方法
   - **请求参数**：
     - 路径参数（Path Parameters）
     - 查询参数（Query Parameters）
     - 请求体参数（Body Parameters）
     - 请求头参数（Header Parameters）
   - **参数说明**：每个参数的类型、是否必填、默认值、取值范围、示例值
   - **响应格式**：
     - 成功响应的数据结构和字段说明
     - 错误响应的格式和错误码说明
   - **接口示例**：提供完整的请求和响应示例
5. **业务逻辑流程**: 该功能的业务逻辑流程，使用 mermaid 流程图，需要查看该功能的
   所有视图控制器，分析代码逻辑，确保不遗漏任何细节。
6. **UI 交互流程**: 如果该功能有前端界面，描述用户如何与该功能交互，使用 mermaid
   序列图。
7. **数据库设计**：如果涉及数据存储，说明相关的数据表结构和字段。

_要求_

- 根据代码库实际内容编写，确保信息准确。
- 禁止编造不存在的代码或功能。
- #codebase 必须搜索代码库，不能凭记忆。
- 使用 mermaid 语法绘制业务流程图和交互序列图。
- **API 接口分析要求**：
  - 通过代码分析找到实际的路由定义和处理函数
  - 分析处理函数的参数验证逻辑，提取参数要求
  - 查看数据模型定义，了解请求和响应的数据结构
  - 分析错误处理逻辑，提取可能的错误响应
  - 提供真实的代码片段作为接口实现的证据
- 业务数据操作需要给出关键的代码片段。
- 如果注释包含关键业务功能信息，需要整理给出来。

_API 接口文档格式示例_：

````markdown
### POST /api/employee/auth

**功能描述**：员工身份认证

**请求参数**：

- **Header Parameters**：

  - `Content-Type`: `application/json` (必填)
  - `Authorization`: `Bearer token` (可选，用于已登录用户)

- **Body Parameters**：
  - `employee_id`: `string` (必填) - 员工 ID，6-20 位数字或字母
  - `password`: `string` (必填) - 密码，8-32 位字符
  - `captcha`: `string` (可选) - 验证码，4 位数字

**响应格式**：

- **成功响应 (200)**：
  ```json
  {
    "code": 0,
    "message": "success",
    "data": {
      "token": "fooobarxxxxxxx...",
      "user_info": {
        "employee_id": "EMP001",
        "name": "张三",
        "department": "技术部"
      }
    }
  }
  ```
````
